<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>D3: Vertical axis added</title>
	<script type="application/javascript" src="d3.v3.js"></script>
	<script type="application/javascript" src="http://d3js.org/d3.v3.js"></script>
	<script type="application/javascript" src="21.js"></script>
	<style type="text/css">

		.axis path,
		.axis line {
			fill: none;
			stroke: black;
			shape-rendering: crispEdges;
		}

		.axis text {
			font-family: sans-serif;
			font-size: 11px;
		}
		#drag-me {
			width: 25%;
			height: 100%;
			margin: 10%;

			background-color: #29e;
			color: white;

			border-radius: 0.75em;
			padding: 4%;

			-webkit-transform: translate(0px, 0px);
			transform: translate(0px, 0px);
		}

		#drag-me::before {
			content: "#" attr(id);
			font-weight: bold;
		}
	</style>
</head>
<body>

<form>
	<p><b>Отметки:</b><br>
		<input type="text">

</form>
<button onclick="add1()">Добавить отметку</button>




<!--<div id="drag-me" class="draggable">
	<p> Click or touch and drag this element around </p>
</div>-->
<script type="text/javascript">
	//Width and height
/*	var w = 500;
	var h = 300;
	var padding = 30;

	var dataset = [
		[5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
		[410, 12], [475, 44], [25, 67], [85, 21], [220, 88],
		[600, 150]
	];

	//Create scale functions
	var xScale = d3.scale.linear()
			.domain([0, d3.max(dataset, function(d) { return d[0]; })])
			.range([padding, w - padding * 2]);

	var yScale = d3.scale.linear()
			.domain([0, d3.max(dataset, function(d) { return d[1]; })])
			.range([h - padding, padding]);

	var rScale = d3.scale.linear()
			.domain([0, d3.max(dataset, function(d) { return d[1]; })])
			.range([2, 5]);

	//Define X axis
	var xAxis = d3.svg.axis()
			.scale(xScale)
			.orient("bottom")
			.ticks(5);

	//Define Y axis
	var yAxis = d3.svg.axis()
			.scale(yScale)
			.orient("left")
			.ticks(5);



	//Create circles
	svg.selectAll("circle")
			.data(dataset)
			.enter()
			.append("circle")
			.attr("cx", function(d) {
				return xScale(d[0]);
			})
			.attr("cy", function(d) {
				return yScale(d[1]);
			})
			.attr("r", function(d) {
				return rScale(d[1]);
			});*/

/*	//Create labels
	svg.selectAll("text")
			.data(dataset)
			.enter()
			.append("text")
			.text(function(d) {
				return d[0] + "," + d[1];
			})
			.attr("x", function(d) {
				return xScale(d[0]);
			})
			.attr("y", function(d) {
				return yScale(d[1]);
			})
			.attr("font-family", "sans-serif")
			.attr("font-size", "11px")
			.attr("fill", "red");

	//Create X axis
	svg.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(0," + (h - padding) + ")")
			.call(xAxis);

	//Create Y axis
	svg.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(" + padding + ",0)")
			.call(yAxis);

	svg.on('dragstart', function() {
		console.log("o");
	})*/
	var widthSVGdescart = document.body.clientWidth;
	var heightSVGdescart = screen.height * 0.75;
	var centrHSVGdescart = screen.height * 0.75 / 2;
	var centrWSVGdescart = document.body.clientWidth / 2;


	//Create SVG element
	var svg = d3.select("body")
			.append("svg")
			.attr("width", widthSVGdescart)
			.attr("height", heightSVGdescart);

	var descart = svg.append("g")
			.attr("id", "descart")
			.classed("descart", true);


	descart.append("line")
			.attr("id", "axisY")
			.attr("x1", widthSVGdescart / 2)
			.attr("y1", heightSVGdescart * -10)
			.attr("x2", widthSVGdescart / 2)
			.attr("y2", heightSVGdescart * 10)
			.style({
				"stroke": "red",
				"stroke-width": 1
			});

	descart.append("line")
			.attr("x1", widthSVGdescart / 2)
			.attr("y1", heightSVGdescart * -10)
			.attr("x2", widthSVGdescart / 2)
			.attr("y2", heightSVGdescart * 10)
			.style({
				"stroke": "red",
				"opacity": 0,
				"stroke-width": 30
			});

	descart.append("line")
			.attr("id", "axisX")
			.attr("x1", widthSVGdescart * -10)
			.attr("y1", heightSVGdescart / 2)
			.attr("x2", widthSVGdescart * 10)
			.attr("y2", heightSVGdescart / 2)
			.style({
				"stroke": "red",
				"stroke-width": 1
			});

	descart.append("line")
			.attr("x1", widthSVGdescart * -10)
			.attr("y1", heightSVGdescart / 2)
			.attr("x2", widthSVGdescart * 10)
			.attr("y2", heightSVGdescart / 2)
			.style({
				"stroke": "red",
				"opacity": 0,
				"stroke-width": 30
			});

	descart.append("circle")
			.attr("id", "zero")
			.attr("cx", centrHSVGdescart)
			.attr("cy", centrWSVGdescart)
			.attr("r", 2)
			.style({
				"stroke": "black",
				"stroke-width": 2
			});

	var marksGroup = descart.append("g")
			.attr("id", "marksGroup");

	marksGroup.append("line")
			.attr("id", "axisX")
			.attr("x1", widthSVGdescart * -10)
			.attr("y1", heightSVGdescart / 2)
			.attr("x2", widthSVGdescart * 10)
			.attr("y2", heightSVGdescart / 2)
			.style({
				"stroke": "red",
				"stroke-width": 1
			});


	function add1() {
		var form = d3.select("form")
				.append("input")
				.attr("type", "text");
		console.log(axisX);
	}
var axisX;

	interact('.descart')
			.draggable({
				inertia: true,
				restrict: {
					elementRect: { top: 0, left: 0, bottom: 1, right: 1 }
				},
				onmove: function (event) {
					var target = event.target,
							x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
							y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
					axisX = y;
					// translate the element
					target.style.webkitTransform =
							target.style.transform =
									'translate(' + x + 'px, ' + y + 'px)';

					// update the posiion attributes
					target.setAttribute('data-x', x);
					target.setAttribute('data-y', y);
				},
				// call this function on every dragend event
				onend: function (event) {
					var textEl = event.target.querySelector('p');

					textEl && (textEl.textContent =
							'moved a distance of '
							+ (Math.sqrt(event.dx * event.dx +
							event.dy * event.dy)|0) + 'px');
				}
			});

	interact('.point')
			.draggable({
				// enable inertial throwing
				inertia: true,
				// keep the element within the area of it's parent
				restrict: {
					elementRect: { left: 0, right: 0, top: 1, bottom: 1 }
				},

				// call this function on every dragmove event
				onmove: function (event) {
					var target = event.target,
					// keep the dragged position in the data-x/data-y attributes
							x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
							y = 0;
					// translate the element
					target.style.webkitTransform =
							target.style.transform =
									'translate(' + x + 'px, ' + y + 'px)';

					// update the posiion attributes
					target.setAttribute('data-x', x);
					target.setAttribute('data-y', y);
				},
				// call this function on every dragend event
				onend: function (event) {
					var textEl = event.target.querySelector('p');
					textEl && (textEl.textContent =
							'moved a distance of '
							+ (Math.sqrt(event.dx * event.dx +
							event.dy * event.dy)|0) + 'px');
				}

			});



</script>

<svg id="mySVG" width="1000" height="2000" >
	<image xlink:href="1418379167_proizvoditelnost-nasosa-kotla-baksi.-obrezka.jpg" x="0" y="0" height="483px" width="736px"/>
	<g  id="drag-me" class="draggable">
		<line x1="100" y1="-1000" x2="100" y2="2000" style="stroke:rgb(255,0,0);stroke-width:2" />
		<g class="point">
			<line x1="150" y1="150" x2="150" y2="250" style="stroke:rgb(27,7,100);stroke-width:2" />
		</g>
		<line x1="-1000" y1="200" x2="1000" y2="200" style="stroke:rgb(255,0,0);stroke-width:2" />
	</g>

	<g class="draggable">
		<path d="M 20 70 L 140 70 M 170 70 L 280 70" id="svg_2" stroke-linecap="null" stroke-linejoin="null" stroke-width="5" stroke="#000000" fill="none"/>
	</g>

	<svg viewBox="0 100 800 800">
		<rect  id="maroonRect"  x="200" y="200" width="160" height="60" fill="maroon" stroke="black" stroke-width="2"  />
	</svg>
	<g id="myG" >
		<rect id="blueRect"  x="220" y="250" width="60" height="60" fill="blue" stroke="black" stroke-width="2"  />
	</g>
	<circle id='blackCircle' r=10 fill=black />
</svg>

</body>
</html>